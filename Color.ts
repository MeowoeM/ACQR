namespace Color {
    export const colorMap: Record<string, Number> = {
        '#FFFFFF': parseInt('0f', 16),
        '#EEEEEE': parseInt('1f', 16),
        '#DDDDDD': parseInt('2f', 16),
        '#CCCDCC': parseInt('3f', 16),
        '#BBBBBB': parseInt('4f', 16),
        '#AAAAAA': parseInt('5f', 16),
        '#999999': parseInt('6f', 16),
        '#888888': parseInt('7f', 16),
        '#777777': parseInt('8f', 16),
        '#666666': parseInt('9f', 16),
        '#555555': parseInt('af', 16),
        '#444444': parseInt('bf', 16),
        '#333233': parseInt('cf', 16),
        '#222222': parseInt('df', 16),
        '#000000': parseInt('ef', 16),
        '#FFEEFF': parseInt('00', 16),
        '#FF99AA': parseInt('01', 16),
        '#EE5599': parseInt('02', 16),
        '#FF66AA': parseInt('03', 16),
        '#FF0066': parseInt('04', 16),
        '#BB4477': parseInt('05', 16),
        '#CC0055': parseInt('06', 16),
        '#990033': parseInt('07', 16),
        '#552233': parseInt('08', 16),
        '#FFBBCC': parseInt('10', 16),
        '#FF7777': parseInt('11', 16),
        '#DD3210': parseInt('12', 16),
        '#FF5544': parseInt('13', 16),
        '#FF0000': parseInt('14', 16),
        '#CC6666': parseInt('15', 16),
        '#BB4444': parseInt('16', 16),
        '#BB0000': parseInt('17', 16),
        '#882222': parseInt('18', 16),
        '#DDCDBB': parseInt('20', 16),
        '#FFCD66': parseInt('21', 16),
        '#DD6622': parseInt('22', 16),
        '#FFAA22': parseInt('23', 16),
        '#FF6600': parseInt('24', 16),
        '#BB8855': parseInt('25', 16),
        '#DD4400': parseInt('26', 16),
        '#BB4400': parseInt('27', 16),
        '#663210': parseInt('28', 16),
        '#FFEEDD': parseInt('30', 16),
        '#FFDDCC': parseInt('31', 16),
        '#FFCDAA': parseInt('32', 16),
        '#FFBB88': parseInt('33', 16),
        '#FFAA88': parseInt('34', 16),
        '#DD8866': parseInt('35', 16),
        '#BB6644': parseInt('36', 16),
        '#995533': parseInt('37', 16),
        '#884422': parseInt('38', 16),
        '#FFCDFF': parseInt('40', 16),
        '#EE88FF': parseInt('41', 16),
        '#CC66DD': parseInt('42', 16),
        '#BB88CC': parseInt('43', 16),
        '#CC00FF': parseInt('44', 16),
        '#996699': parseInt('45', 16),
        '#8800AA': parseInt('46', 16),
        '#550077': parseInt('47', 16),
        '#330044': parseInt('48', 16),
        '#FFBBFF': parseInt('50', 16),
        '#FF99FF': parseInt('51', 16),
        '#DD22BB': parseInt('52', 16),
        '#FF55EE': parseInt('53', 16),
        '#FF00CC': parseInt('54', 16),
        '#885577': parseInt('55', 16),
        '#BB0099': parseInt('56', 16),
        '#880066': parseInt('57', 16),
        '#550044': parseInt('58', 16),
        '#DDBB99': parseInt('60', 16),
        '#CCAA77': parseInt('61', 16),
        '#774433': parseInt('62', 16),
        '#AA7744': parseInt('63', 16),
        '#993200': parseInt('64', 16),
        '#773222': parseInt('65', 16),
        '#552200': parseInt('66', 16),
        '#331000': parseInt('67', 16),
        '#221000': parseInt('68', 16),
        '#FFFFCC': parseInt('70', 16),
        '#FFFF77': parseInt('71', 16),
        '#DDDD22': parseInt('72', 16),
        '#FFFF00': parseInt('73', 16),
        '#FFDD00': parseInt('74', 16),
        '#CCAA00': parseInt('75', 16),
        '#999900': parseInt('76', 16),
        '#887700': parseInt('77', 16),
        '#555500': parseInt('78', 16),
        '#DDBBFF': parseInt('80', 16),
        '#BB99EE': parseInt('81', 16),
        '#6632CC': parseInt('82', 16),
        '#9955FF': parseInt('83', 16),
        '#6600FF': parseInt('84', 16),
        '#554488': parseInt('85', 16),
        '#440099': parseInt('86', 16),
        '#220066': parseInt('87', 16),
        '#221033': parseInt('88', 16),
        '#BBBBFF': parseInt('90', 16),
        '#8899FF': parseInt('91', 16),
        '#3332AA': parseInt('92', 16),
        '#3355EE': parseInt('93', 16),
        '#0000FF': parseInt('94', 16),
        '#333288': parseInt('95', 16),
        '#0000AA': parseInt('96', 16),
        '#101066': parseInt('97', 16),
        '#000022': parseInt('98', 16),
        '#99EEBB': parseInt('a0', 16),
        '#66CD77': parseInt('a1', 16),
        '#226610': parseInt('a2', 16),
        '#44AA33': parseInt('a3', 16),
        '#008833': parseInt('a4', 16),
        '#557755': parseInt('a5', 16),
        '#225500': parseInt('a6', 16),
        '#103222': parseInt('a7', 16),
        '#002210': parseInt('a8', 16),
        '#DDFFBB': parseInt('b0', 16),
        '#CCFF88': parseInt('b1', 16),
        '#88AA55': parseInt('b2', 16),
        '#AADD88': parseInt('b3', 16),
        '#88FF00': parseInt('b4', 16),
        '#AABB99': parseInt('b5', 16),
        '#66BB00': parseInt('b6', 16),
        '#559900': parseInt('b7', 16),
        '#336600': parseInt('b8', 16),
        '#BBDDFF': parseInt('c0', 16),
        '#77CDFF': parseInt('c1', 16),
        '#335599': parseInt('c2', 16),
        '#6699FF': parseInt('c3', 16),
        '#1077FF': parseInt('c4', 16),
        '#4477AA': parseInt('c5', 16),
        '#224477': parseInt('c6', 16),
        '#002277': parseInt('c7', 16),
        '#001044': parseInt('c8', 16),
        '#AAFFFF': parseInt('d0', 16),
        '#55FFFF': parseInt('d1', 16),
        '#0088BB': parseInt('d2', 16),
        '#55BBCC': parseInt('d3', 16),
        '#00CDFF': parseInt('d4', 16),
        '#4499AA': parseInt('d5', 16),
        '#006688': parseInt('d6', 16),
        '#004455': parseInt('d7', 16),
        '#002233': parseInt('d8', 16),
        '#CCFFEE': parseInt('e0', 16),
        '#AAEEDD': parseInt('e1', 16),
        '#33CDAA': parseInt('e2', 16),
        '#55EEBB': parseInt('e3', 16),
        '#00FFCC': parseInt('e4', 16),
        '#77AAAA': parseInt('e5', 16),
        '#00AA99': parseInt('e6', 16),
        '#008877': parseInt('e7', 16),
        '#004433': parseInt('e8', 16),
        '#AAFFAA': parseInt('f0', 16),
        '#77FF77': parseInt('f1', 16),
        '#66DD44': parseInt('f2', 16),
        '#00FF00': parseInt('f3', 16),
        '#22DD22': parseInt('f4', 16),
        '#55BB55': parseInt('f5', 16),
        '#00BB00': parseInt('f6', 16),
        '#008800': parseInt('f7', 16),
        '#224422': parseInt('f8', 16)
    } as const;
    
    export function hex2rgb(hex: string): [number, number, number] {
        let rgb: [number, number, number] = [0, 0, 0];
        let bigInt = parseInt(hex.slice(1), 16);
        rgb[0] = (bigInt >> 16) & 255;
        rgb[1] = (bigInt >> 8) & 255;
        rgb[2] = bigInt & 255;
        return rgb
    }
    
    export function rgb2hex(rgb: [number, number, number]): string {
        return "#" + ((1 << 24) + (rgb[0] << 16) + (rgb[1] << 8) + rgb[2]).toString(16).slice(1);
    }
    
    export function isEqualRGB(color1, color2): boolean {
        if (color1[0] != color2[0]) {return false}
        if (color1[1] != color2[1]) {return false}
        if (color1[2] != color2[2]) {return false}
        return true
    }

    export function EuclideanColorDistance(
        c1: [number, number, number],
        c2: [number, number, number]
    ): number {
        return Math.sqrt(
            Math.pow(c1[0] - c2[0], 2) + 
            Math.pow(c1[1] - c2[2], 2) + 
            Math.pow(c1[2] - c2[2], 2)
        )
    }

    export function deltaE(rgbA, rgbB) {
        let labA = rgb2lab(rgbA);
        let labB = rgb2lab(rgbB);
        let deltaL = labA[0] - labB[0];
        let deltaA = labA[1] - labB[1];
        let deltaB = labA[2] - labB[2];
        let c1 = Math.sqrt(labA[1] * labA[1] + labA[2] * labA[2]);
        let c2 = Math.sqrt(labB[1] * labB[1] + labB[2] * labB[2]);
        let deltaC = c1 - c2;
        let deltaH = deltaA * deltaA + deltaB * deltaB - deltaC * deltaC;
        deltaH = deltaH < 0 ? 0 : Math.sqrt(deltaH);
        let sc = 1.0 + 0.045 * c1;
        let sh = 1.0 + 0.015 * c1;
        let deltaLKlsl = deltaL / (1.0);
        let deltaCkcsc = deltaC / (sc);
        let deltaHkhsh = deltaH / (sh);
        let i = deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh;
        return i < 0 ? 0 : Math.sqrt(i);
      }
      
    function rgb2lab(rgb){
    let r = rgb[0] / 255, g = rgb[1] / 255, b = rgb[2] / 255, x, y, z;
    r = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;
    g = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;
    b = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;
    x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;
    y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;
    z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;
    x = (x > 0.008856) ? Math.pow(x, 1/3) : (7.787 * x) + 16/116;
    y = (y > 0.008856) ? Math.pow(y, 1/3) : (7.787 * y) + 16/116;
    z = (z > 0.008856) ? Math.pow(z, 1/3) : (7.787 * z) + 16/116;
    return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)]
    }
}